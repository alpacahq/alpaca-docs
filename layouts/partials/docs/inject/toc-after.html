<style>
  .alpaca-native-ad {
    display: none;
    opacity: 0;
    transition: opacity 100ms ease-in-out;
  }
  @media (min-width: 897px) {
    .alpaca-native-ad {
      display: block;
      opacity: 1;
      width: 100%;
      height: 100%;
    }
    .alpaca-native-ad img {
      width: 100%;
      height: auto;
    }
  }
</style>
<a href="https://alpaca.markets/docs/broker/integration/lct/" id="alpaca-lct-native-ad"
  class="alpaca-native-ad">
  <img src="{{ "alpaca-lct-native-ad.png" | relURL }}"
    alt="Local Currency Trading (LCT), buy, sell, and view US stocks in your local currency with real-time currency conversion" />
</a>
<a href="https://alpaca.markets/docs/python-sdk/" id="alpaca-py-native-ad"
  class="alpaca-native-ad">
  <img src="{{ "alpaca-py-native-ad.png" | relURL }}"
    alt="Alpaca-py, The Official Python SDK for Alpaca's Suite of APIs" />
</a>
<script>
  window.addEventListener("DOMContentLoaded", function () {
    (function () {
      try {
        const ads = {
          alpacaPy: {
            element: document.getElementById("alpaca-py-native-ad"),
            pages: ["market-data", "trading"],
            eventName: "docs_alpaca_py_ad_clicked"
          },
          alpacaLCT: {
            element: document.getElementById("alpaca-lct-native-ad"),
            pages: ["broker"],
            eventName: "docs_lct_ad_clicked"
          },
        }

        if (Object.values(ads).filter(function (obj) { return obj.element === null }).length) {
          console.warn("element in ads is undefined", ads);
          return;
        }

        function activateAd(adKey) {
          if (Object.keys(ads).filter(function (name) { return name === adKey }).length === 0) {
            console.warn("adKey is not in ads object", adKey, ads);
          }
          for (const ad in ads) {
            if (ad !== adKey) {
              ads[ad].element.remove();
            }
          }
        }
        // Show alpaca py on homepage
        if (window.location.pathname === "/docs/") {
          activateAd("alpacaPy");
          return;
        }
        // Add event listener to active ad and hide all other ads
        for (const ad in ads) {
          for (let i = 0; i < ads[ad].pages.length; i++) {
            if (window.location.pathname.includes(ads[ad].pages[i])) {
              activateAd(ad);
              ads[ad].element.addEventListener("click", function () {
                amplitude.getInstance().logEvent(ads[ad].eventName, {
                  url: [window.location.protocol, "//", window.location.host, window.location.pathname].join("")
                });
              })
              return;
            }
          }
        }
        // Remove all ads
        for (const ad in ads) {
          ads[ad].element.remove();
        }
      } catch (err) {
        console.error(err);
      }
    })();
  });
</script>